{"version":3,"sources":["uni-app:///main.js","webpack:///E:/finalproject/ParkingLotMobile/pages/carnavigation/carNavigation.vue?0e3b","webpack:///E:/finalproject/ParkingLotMobile/pages/carnavigation/carNavigation.vue?f0c2","webpack:///E:/finalproject/ParkingLotMobile/pages/carnavigation/carNavigation.vue?9d02","webpack:///E:/finalproject/ParkingLotMobile/pages/carnavigation/carNavigation.vue?ce47","uni-app:///pages/carnavigation/carNavigation.vue","webpack:///E:/finalproject/ParkingLotMobile/pages/carnavigation/carNavigation.vue?8bf4","webpack:///E:/finalproject/ParkingLotMobile/pages/carnavigation/carNavigation.vue?cd5f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","key","data","msgType","messageText","doorLatitude","doorLongitude","latitude","longitude","markers","polyline","windowHeight","timer","lc","onReady","onLoad","onShow","setTimeout","uni","url","console","success","scope","that","fail","title","content","cancelText","cancelColor","confirmText","confirmColor","onHide","clearInterval","onUnload","methods","messageBox","main","MarkCustomerLocation","type","id","width","height","iconPath","MapNavigation","callout","fontSize","borderRadius","borderWidth","bgColor","display","qqmapsdk","mode","from","to","pl","coors","points","color","createMarkers","method","handleErrorPark"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,sBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0H;AAC1H;AACiE;AACL;AACa;;;AAGzE;AAC0L;AAC1L,gBAAgB,mMAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,+PAEN;AACP,KAAK;AACL;AACA,aAAa,sWAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAAgtB,CAAgB,quBAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACiBpuB;;;;;;;;;;;;;;;;;;AAMA;AACA,cAAc,mBAAO,CAAC,uCAA+B;AACrD;EACAC;AACA;AAAA,eACA;EACAC;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC,2BACA;EACAC;IACA;IACA;IACA;MAAA;MACA;MACAC;QACAC;UACAC;QACA;MACA;IACA;MAAA;MACA;MACAF;QACAC;UACAC;QACA;MACA;IACA;MACA;MACAF;QACAC;UACAC;QACA;MACA;IACA;MACA;MACAF;QACAC;UACAC;QACA;MACA;IACA;MACAC;MACA;MACA;MACAF;QACAG;UACA;UACA;YACA;YACAH;cACAI;cACAD;gBACAD;gBACA;gBACAG;cACA;cACAC;gBACA;gBACAJ;gBACA;gBACAF;kBACAO;kBACAC;kBACAC;kBACAC;kBACAC;kBACAC;kBACAT;oBACA;sBACA;sBACAH;wBACAG;0BACAD;wBACA;sBACA;oBACA;sBACA;sBACAA;oBACA;kBACA;gBACA;cACA;YACA;UACA;UACA;UAAA,KACA;YACAA;YACAG;UACA;QACA;QACAC;UACAJ;QACA;MACA;IACA;EACA;EACA;EACAW;IACAX;IACA;IACAY;IACA;IACA;IACAZ;EACA;EACA;EACAa;IACAb;IACA;IACAY;IACA;IACA;IACAZ;EACA;EACAc;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACAlB;QACAG;UACAE;QACA;MACA;MACA;MACA;MACAA;MACAA;MACAA;QACAA;QACAA;MACA;IACA;IACA;IACAc;MACA;MACAnB;QACAoB;QACA;QACA;QACAjB;UACAD;UACAG;UACAA;;UAEA;UACAA;UACAA;UAEA;YACAA;cACAgB;cACAC;cACAC;cACAjC;cACAD;cACAmC;YACA;UACA;YACAnB;YACAA;cACAgB;cACAC;cACAC;cACAjC;cACAD;cACAmC;YACA;UACA;QACA;QACAlB;UACAJ;QACA;MACA;IACA;IACA;IACAuB;MACA;MACA;MACA;MACA;MACA;MACA;QACAJ;QACAC;QACAC;QACAjC;QACAD;QACAmC;QACAE;UACAlB;UACAmB;UAAA;UACAC;UAAA;UACAC;UACAC;UAAA;UACAC;QACA;MACA;;MACA;MAEAC;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAhC;UACA;UACA;UACA;YAAAiC;UACA;UACA;UACA;YACAC;UACA;UACA;UACA;YACAD;cAAA/C;cAAAC;YAAA;UACA;UACA;UACAe,gCACAA,kCACAA;YACAiC;YACAC;YACAjB;UACA;QACA;QACAhB;UACAJ;QACA;MACA;IACA;IACA;IACAsC;MACA;MACAxC;QACAC;QACAwC;QACAzD;QACAmB;UACAD;UACA;UACA;UACA;YACA;cACA;cACA;YACA;YACA;cACA;gBACAmB;gBACAC;gBACAC;gBACAjC;gBACAD;gBACAmC;cACA;YACA;cACA;gBACAH;gBACAC;gBACAC;gBACAjC;gBACAD;gBACAmC;cACA;YACA;YACAnB;UACA;QACA;MACA;IACA;IACAqC;MACA;QACA;MACA;QACA;MACA,QAEA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC3UA;AAAA;AAAA;AAAA;AAA4gC,CAAgB,sgCAAG,EAAC,C;;;;;;;;;;;ACAhiC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/carnavigation/carNavigation.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/carnavigation/carNavigation.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./carNavigation.vue?vue&type=template&id=78181490&\"\nvar renderjs\nimport script from \"./carNavigation.vue?vue&type=script&lang=js&\"\nexport * from \"./carNavigation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./carNavigation.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/carnavigation/carNavigation.vue\"\nexport default component.exports","export * from \"-!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./carNavigation.vue?vue&type=template&id=78181490&\"","var components\ntry {\n  components = {\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    uniPopupMessage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup-message/uni-popup-message\" */ \"@/uni_modules/uni-popup/components/uni-popup-message/uni-popup-message.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./carNavigation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./carNavigation.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view id=\"mapbox\">\r\n\t\t\t<map ref=\"mymap\" id=\"mymap\" :style=\"{height: windowHeight + 'px'}\"\r\n\t\t\t:latitude=\"doorLatitude\" :longitude=\"doorLongitude\" :markers=\"markers\" :polyline=\"polyline\"\r\n\t\t\t rotate=170 ></map>\r\n\t\t</view>\r\n\t\t<!-- 提示信息弹窗 -->\r\n\t\t<view> \r\n\t\t\t<uni-popup ref=\"message\" type=\"message\">\r\n\t\t\t\t<uni-popup-message :type=\"msgType\" :message=\"messageText\" :duration=\"2000\"></uni-popup-message>\r\n\t\t\t</uni-popup>\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script>\r\nimport {\n\t\tmapState,\n\t\tmapMutations,\n\t\tmapGetters,\n\t\tmapActions\n\t} from 'vuex'\r\n// 引入SDK核心类，js文件根据自己业务，位置可自行放置\nvar QQMapWX = require('@/utils/qqmap-wx-jssdk.min.js')\r\nvar qqmapsdk = new QQMapWX({\r\n\t\t\tkey: 'U67BZ-GJTEX-V464V-ZC7IB-J23R7-V2F4Y'\r\n\t\t})\r\nexport default {\r\n\tdata(){\r\n\t\treturn{\r\n\t\t\t//消息盒子类型\r\n\t\t\tmsgType: '',\r\n\t\t\t//消息盒子内容\r\n\t\t\tmessageText: '',\r\n\t\t\t//地图初始化中心\r\n\t\t\tdoorLatitude:22.361735,\r\n\t\t\tdoorLongitude:113.550950, //大东小西\r\n\t\t\tlatitude:'',\r\n\t\t\tlongitude:'',\r\n\t\t\tmarkers:[],\r\n\t\t\tpolyline:[],\r\n\t\t\twindowHeight:'',\r\n\t\t\t//定时器\r\n\t\t\ttimer:null,\r\n\t\t\tlc:null,\r\n\t\t} \r\n\t},\r\n\tonReady() {\r\n\t\t//创建地图画布\r\n\t\tthis.mapContext = uni.createMapContext('mymap',this);\r\n\t},\r\n\tonLoad(){\r\n\t},\r\n\tonShow() {\r\n\t\tvar loginCustomer = uni.getStorageSync(\"LoginCustomerInfo\");\r\n\t\tvar enterFlag = uni.getStorageSync(\"enterFlag\");\r\n\t\tif(loginCustomer.openId == null | loginCustomer == null){//未登录\r\n\t\t\tthis.messageBox('error','请先登录！');\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl:\"/pages/index/index\"\r\n\t\t\t\t})\r\n\t\t\t},1500)\r\n\t\t}else if(loginCustomer.carId == null | loginCustomer.carId == ''){//未登记车牌信息\r\n\t\t\tthis.messageBox('error','请绑定车牌！');\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl:\"/pages/userpage/userPage\"\r\n\t\t\t\t})\r\n\t\t\t},1500)\r\n\t\t}else if(loginCustomer.enterTime == null && enterFlag == ''){\r\n\t\t\tthis.messageBox('error','您未入场！');\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl:\"/pages/index/index\"\r\n\t\t\t\t})\r\n\t\t\t},1500)\r\n\t\t}else if(loginCustomer.leaveTime != null){\r\n\t\t\tthis.messageBox('error','您已离场！');\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl:\"/pages/index/index\"\r\n\t\t\t\t})\r\n\t\t\t},1500)\r\n\t\t}else{\r\n\t\t\tconsole.log(\"车位导航：车位导航前置条件满足\")\r\n\t\t\tvar that = this;\r\n\t\t\t//获取用户授权后定位位置信息\r\n\t\t\tuni.getSetting({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t// 如果没有授权\r\n\t\t\t\t\tif (!res.authSetting['scope.userLocation']) {\r\n\t\t\t\t\t\t// 则拉起授权窗口\r\n\t\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\t\tscope: 'scope.userLocation',\r\n\t\t\t\t\t\t\tsuccess(){\r\n\t\t\t\t\t\t\t\tconsole.log(\"车位导航：用户已授权（授权窗口），开始执行程序\")\r\n\t\t\t\t\t\t\t\t//进入程序主方法\r\n\t\t\t\t\t\t\t\tthat.main();\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(error) {\r\n\t\t\t\t\t\t\t\t//点击了拒绝授权后--就一直会进入失败回调函数--此时就可以在这里重新拉起授权窗口\r\n\t\t\t\t\t\t\t\tconsole.log('拒绝授权', error)\r\n\t\t\t\t\t\t\t\t//提示\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\tcontent: '若点击不授权，将无法使用位置功能',\r\n\t\t\t\t\t\t\t\t\tcancelText: '不授权',\r\n\t\t\t\t\t\t\t\t\tcancelColor: '#999',\r\n\t\t\t\t\t\t\t\t\tconfirmText: '授权',\r\n\t\t\t\t\t\t\t\t\tconfirmColor: '#f94218',\r\n\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\t// 选择弹框内授权\r\n\t\t\t\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res.authSetting)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\t\t\t\t\t// 选择弹框内 不授权\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('用户点击不授权')\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//若有授权，执行业务方法\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tconsole.log(\"车位导航：用户已授权（二次），开始执行程序\")\r\n\t\t\t\t\t\tthat.main();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\r\n\t\t\t\t\tconsole.log(\"授权获取错误：\",err);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}, \r\n\t//监听页面隐藏\r\n\tonHide(){\r\n\t\tconsole.log(this.markers);\r\n\t\t//离开页面时清除计时器\r\n\t\tclearInterval(this.timer);\r\n\t\tthis.timer = null;\r\n\t\tthis.markers = [];\r\n\t\tconsole.log(\"车位导航：退出程序\");\r\n\t},\r\n\t//监听页面卸载\r\n\tonUnload(){\r\n\t\tconsole.log(this.markers);\r\n\t\t//离开页面时清除计时器\r\n\t\tclearInterval(this.timer);\r\n\t\tthis.timer = null;\r\n\t\tthis.markers = [];\r\n\t\tconsole.log(\"车位导航：退出程序\");\r\n\t},\r\n\tmethods:{\r\n\t\t//登录消息盒子\r\n\t\tmessageBox(msgType,messageText){\r\n\t\t\tthis.msgType = msgType\r\n\t\t\tthis.messageText = messageText\r\n\t\t\tthis.$refs.message.open();\r\n\t\t},\r\n\t\t//程序主方法\r\n\t\tmain(){\r\n\t\t\tvar that = this;\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tthat.windowHeight = res.windowHeight;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tvar loginCustomer = uni.getStorageSync(\"LoginCustomerInfo\");\r\n\t\t\tthis.lc = loginCustomer;\r\n\t\t\tthat.MapNavigation();\r\n\t\t\tthat.createMarkers();\r\n\t\t\tthat.timer = setInterval( () => {\r\n\t\t\t    that.MarkCustomerLocation();\r\n\t\t\t\tthat.handleErrorPark();\r\n\t\t\t}, 2000);\r\n\t\t},\r\n\t\t//获取用户位置并标记\r\n\t\tMarkCustomerLocation(){\r\n\t\t\tvar that = this;\r\n\t\t\tuni.getLocation({\r\n\t\t\t\ttype: 'wgs84',\r\n\t\t\t\t// geocode: true , //设置该参数为true可直接获取经纬度及城市信息\r\n\t\t\t\t// isHighAccuracy:true,\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tconsole.log(\"用户当前定位信息：\",res);\r\n\t\t\t\t\tthat.userLatitude = res.latitude;\r\n\t\t\t\t\tthat.userLongitude = res.longitude;\r\n\t\t\t\t\t\r\n\t\t\t\t\t//测试\r\n\t\t\t\t\tthat.userLatitude = that.lc.latitude;\r\n\t\t\t\t\tthat.userLongitude = that.lc.longitude;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(that.markers.length == 0 || that.markers[that.markers.length-1].id != 9990){\r\n\t\t\t\t\t\tthat.markers.push({\r\n\t\t\t\t\t\t\tid:9990,\r\n\t\t\t\t\t\t\twidth:25,\r\n\t\t\t\t\t\t\theight:25,\r\n\t\t\t\t\t\t\tlongitude:that.userLongitude,\r\n\t\t\t\t\t\t\tlatitude:that.userLatitude,\r\n\t\t\t\t\t\t\ticonPath:'/static/icon/user-navi.png',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthat.markers.pop();\r\n\t\t\t\t\t\tthat.markers.push({\r\n\t\t\t\t\t\t\tid:9990,\r\n\t\t\t\t\t\t\twidth:25,\r\n\t\t\t\t\t\t\theight:25,\r\n\t\t\t\t\t\t\tlongitude:that.userLongitude,\r\n\t\t\t\t\t\t\tlatitude:that.userLatitude,\r\n\t\t\t\t\t\t\ticonPath:'/static/icon/user-navi.png',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail(error) {\r\n\t\t\t\t\tconsole.log('失败', error)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//标记车位，并把路线规划出来\r\n\t\tMapNavigation(){\r\n\t\t\tvar that = this;\r\n\t\t\tvar loginCustomer = uni.getStorageSync(\"LoginCustomerInfo\");\r\n\t\t\tlet doorLocation = this.doorLatitude+\",\"+this.doorLongitude; \r\n\t\t\tlet parkLocation = loginCustomer.latitude+\",\"+loginCustomer.longitude;\r\n\t\t\t//车位标记\r\n\t\t\tvar userPLMarker = {\r\n\t\t\t\tid:9999,\r\n\t\t\t\twidth:25,\r\n\t\t\t\theight:25,\r\n\t\t\t\tlongitude:loginCustomer.longitude,\r\n\t\t\t\tlatitude:loginCustomer.latitude,\r\n\t\t\t\ticonPath:'/static/icon/userplace.png',\r\n\t\t\t\tcallout:{\r\n\t\t\t\t\tcontent:\"您的车位:\"+loginCustomer.parkingPlaceId,\r\n\t\t\t\t\tfontSize:14,//文本大小\r\n\t\t\t\t\tborderRadius:15,//边框圆角\r\n\t\t\t\t\tborderWidth:'10',\r\n\t\t\t\t\tbgColor:'#1296db',//背景颜色\r\n\t\t\t\t\tdisplay:'ALWAYS',//常显\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.markers.push(userPLMarker);\r\n\t\t\t\r\n\t\t\tqqmapsdk.direction({\r\n\t\t\t\tmode:'driving', //导航方式，驾车\r\n\t\t\t\tfrom:doorLocation, //起点经纬度 '22.361735,113.550950'\r\n\t\t\t\tto:parkLocation, //终点经纬度\r\n\t\t\t\tsuccess:function(res){\r\n\t\t\t\t\t// console.log(\"direction res\",res)\r\n\t\t\t\t\tvar ret = res;\r\n\t\t\t\t\tvar coors = ret.result.routes[0].polyline, pl = [];\r\n\t\t\t\t\t//坐标解压（返回的点串坐标，通过前向差分进行压缩）\r\n\t\t\t\t\tvar kr = 1000000;\r\n\t\t\t\t\tfor (var i = 2; i < coors.length; i++) {\r\n\t\t\t\t\t  coors[i] = Number(coors[i - 2]) + Number(coors[i]) / kr;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//将解压后的坐标放入点串数组pl中\r\n\t\t\t\t\tfor (var i = 0; i < coors.length; i += 2) {\r\n\t\t\t\t\t  pl.push({ latitude: coors[i], longitude: coors[i + 1] })\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//设置polyline属性，将路线显示出来,将解压坐标第一个数据作为起点\r\n\t\t\t\t\tthat.latitude=pl[0].latitude,\r\n\t\t\t\t\tthat.longitude=pl[0].longitude,\r\n\t\t\t\t\tthat.polyline= [{\r\n\t\t\t\t\t\tpoints: pl,\r\n\t\t\t\t\t\tcolor: '#1296db',\r\n\t\t\t\t\t\twidth: 4\r\n\t\t\t\t\t}] \r\n\t\t\t\t},\r\n\t\t\t\tfail:function(res){\r\n\t\t\t\t\tconsole.log('err',res)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t//标记车位\r\n\t\tcreateMarkers(){\r\n\t\t\tvar that = this;\r\n\t\t\tuni.request({\r\n\t\t\t\turl:\"http://localhost:8899/parkingplace/getlist\",\r\n\t\t\t\tmethod:'POST',\r\n\t\t\t\tdata:{},\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tconsole.log(res.data.data.list)\r\n\t\t\t\t\tvar logincustomer = uni.getStorageSync(\"LoginCustomerInfo\");\r\n\t\t\t\t\tvar places = res.data.data.list;\r\n\t\t\t\t\tfor(var i= 0 ; i<places.length;i++ ){\r\n\t\t\t\t\t\tif(places[i].ParkingPlaceId == logincustomer.parkingPlaceId){\r\n\t\t\t\t\t\t\t// console.log(\"busy:\",places[i].ParkingPlaceId)\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(places[i].IsParking == 1){\r\n\t\t\t\t\t\t\tvar place = {\r\n\t\t\t\t\t\t\t\t\tid:places[i].Id,\r\n\t\t\t\t\t\t\t\t\twidth:25,\r\n\t\t\t\t\t\t\t\t\theight:25,\r\n\t\t\t\t\t\t\t\t\tlongitude:places[i].Longitude,\r\n\t\t\t\t\t\t\t\t\tlatitude:places[i].Latitude,\r\n\t\t\t\t\t\t\t\t\ticonPath:'/static/icon/fullplace.png',\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar place = {\r\n\t\t\t\t\t\t\t\t\tid:places[i].Id,\r\n\t\t\t\t\t\t\t\t\twidth:25,\r\n\t\t\t\t\t\t\t\t\theight:25,\r\n\t\t\t\t\t\t\t\t\tlongitude:places[i].Longitude,\r\n\t\t\t\t\t\t\t\t\tlatitude:places[i].Latitude,\r\n\t\t\t\t\t\t\t\t\ticonPath:'/static/icon/emptyplace.png',\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.markers.push(place);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleErrorPark(){\r\n\t\t\tif(Math.abs(this.lc.latitude-this.userLatitude) > 0.000020 && Math.abs(this.lc.longitude - this.userLongitude) > 0.000010){\r\n\t\t\t\tthis.messageBox(\"error\",\"请停放到系统指示的区域中！\");\r\n\t\t\t}else if(Math.abs(this.lc.latitude-this.userLatitude) <= 0.000020 && Math.abs(this.lc.longitude - this.userLongitude) <= 0.000010){\r\n\t\t\t\tthis.messageBox(\"success\",\"您已到达指定位置，可以停车！\");\r\n\t\t\t}else{\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n}\n</script>\n\n<style>\r\n\t/* #mapbox{\r\n\t\twidth: 100px;\r\n\t\theight: 300px;\r\n\t} */\r\n\t#mymap{\r\n\t\twidth: 100%;\r\n\t}\n</style>","import mod from \"-!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./carNavigation.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\applicationDownload\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./carNavigation.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1681625622411\n      var cssReload = require(\"D:/applicationDownload/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}